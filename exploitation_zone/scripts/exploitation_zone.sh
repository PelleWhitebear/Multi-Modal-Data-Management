#!/bin/bash
set -e

echo "Starting exploitation zone processing..."
create_t0=$(date +%s)
python3 -m exploitation_zone.scripts.create
create_t1=$(date +%s)
echo "Buckets and sub-buckets created."

echo "Merging Steam and SteamSpy data..."
merge_t0=$(date +%s)
python3 -m exploitation_zone.scripts.merge_jsons
merge_t1=$(date +%s)
echo "JSON data merged."

echo "Enhancing videogame descriptions..."
enhance_t0=$(date +%s)
python3 -m exploitation_zone.scripts.create_descriptions
enhance_t1=$(date +%s)
echo "Videogame descriptions enhanced."

echo "Generating embeddings..."
embed_t0=$(date +%s)
python3 -m exploitation_zone.scripts.create_embeddings
embed_t1=$(date +%s)
echo "Embeddings generated."

echo "Exploitation zone processing completed."

elapsed=$(( embed_t1 - create_t0 ))
echo "Time taken for bucket creation: $((create_t1 - create_t0)) seconds."
echo "Time taken for JSON merging: $((merge_t1 - merge_t0)) seconds."
echo "Time taken for description enhancement: $((enhance_t1 - enhance_t0)) seconds."
echo "Time taken for embedding generation: $((embed_t1 - embed_t0)) seconds."
echo "Total time taken: $elapsed seconds."